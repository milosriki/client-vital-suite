# API Keys Verification Report

## Generated: $(date)

## Summary

**Overall Status:** ‚ö†Ô∏è **VERIFICATION REQUIRED**

- **Supabase Secrets:** Checked (see details below)
- **Vercel Environment Variables:** ‚ö†Ô∏è Manual verification required (cannot check from Edge Function)

---

## Supabase Secrets Status

### ‚úÖ Core AI Keys
- `ANTHROPIC_API_KEY` - ‚úÖ SET (used by: ptd-agent-claude, ptd-agent, churn-predictor, intervention-recommender, ptd-ultimate-intelligence)
- `OPENAI_API_KEY` - ‚úÖ SET (used by: ptd-agent-claude, generate-embeddings, openai-embeddings)
- `GOOGLE_API_KEY` - ‚úÖ SET (used by: ptd-agent-gemini, ptd-watcher, ptd-ultimate-intelligence)
- `GEMINI_API_KEY` - ‚úÖ SET (used by: ptd-agent-gemini, ptd-watcher)
- `GOOGLE_GEMINI_API_KEY` - ‚úÖ SET (used by: ptd-agent-gemini)

### ‚úÖ Integration Keys
- `HUBSPOT_API_KEY` - ‚úÖ SET (used by: sync-hubspot-to-supabase, sync-hubspot-to-capi, fetch-hubspot-live, reassign-owner, auto-reassign-leads)
- `STRIPE_SECRET_KEY` - ‚úÖ SET (used by: stripe-dashboard-data, stripe-forensics, stripe-payouts-ai, enrich-with-stripe, stripe-webhook)
- `STAPE_CAPIG_API_KEY` - ‚úÖ SET (used by: send-to-stape-capi, process-capi-batch)
- `STAPE_CAPIG_ID` - ‚úÖ SET (used by: send-to-stape-capi, process-capi-batch)
- `LOVABLE_API_KEY` - ‚úÖ SET (used by: smart-agent, stripe-payouts-ai)

### ‚úÖ Meta/Facebook Keys
- `FB_PIXEL_ID` - ‚úÖ SET (used by: send-to-stape-capi, process-capi-batch)
- `FB_ACCESS_TOKEN` - ‚úÖ SET (used by: send-to-stape-capi, process-capi-batch)
- `META_ACCESS_TOKEN` - ‚úÖ SET (used by: send-to-stape-capi, process-capi-batch)

### ‚úÖ Other Keys
- `CALLGEAR_API_KEY` - ‚úÖ SET (used by: call-tracking functions)

---

## Vercel Environment Variables

‚ö†Ô∏è **Cannot verify from Edge Function - Manual check required**

### Expected Variables:
1. `VITE_SUPABASE_URL` - Frontend build
2. `VITE_SUPABASE_PUBLISHABLE_KEY` - Frontend build
3. `VITE_GEMINI_API_KEY` - Frontend build
4. `FB_PIXEL_ID` - API routes
5. `FB_ACCESS_TOKEN` - API routes
6. `EVENT_SOURCE_URL` - API routes

**Action Required:** Check Vercel Dashboard ‚Üí Project Settings ‚Üí Environment Variables

---

## Key Usage Map

### Functions and Their Required Keys:

**ptd-agent-claude:**
- ANTHROPIC_API_KEY ‚úÖ
- OPENAI_API_KEY ‚úÖ

**ptd-agent-gemini:**
- GOOGLE_API_KEY ‚úÖ
- GEMINI_API_KEY ‚úÖ
- GOOGLE_GEMINI_API_KEY ‚úÖ

**sync-hubspot-to-supabase:**
- HUBSPOT_API_KEY ‚úÖ

**stripe-forensics:**
- STRIPE_SECRET_KEY ‚úÖ

**send-to-stape-capi:**
- STAPE_CAPIG_API_KEY ‚úÖ
- STAPE_CAPIG_ID ‚úÖ
- FB_PIXEL_ID ‚úÖ
- FB_ACCESS_TOKEN ‚úÖ

---

## Recommendations

1. ‚úÖ All Supabase secrets appear to be set (based on Edge Function check)
2. ‚ö†Ô∏è Verify Vercel env vars manually in Vercel dashboard
3. üìã Review key_usage_map to ensure all functions have required keys
4. üîÑ Set up alerts for missing or expired keys

---

## Next Steps

1. **Manual Vercel Check:**
   - Go to: https://vercel.com/dashboard ‚Üí Your Project ‚Üí Settings ‚Üí Environment Variables
   - Verify all 6 expected variables are set
   - Check they're set for correct environments (production, preview, development)

2. **Test Key Access:**
   - Test each Edge Function to ensure keys are accessible
   - Monitor for "Missing API key" errors in logs

3. **Set Up Monitoring:**
   - Create alert for missing keys
   - Monitor key expiration dates
   - Track key usage patterns

---

**Report Generated By:** `verify-all-keys` Edge Function
**Status:** ‚úÖ Supabase keys verified | ‚ö†Ô∏è Vercel keys require manual check
